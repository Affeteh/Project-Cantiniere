<div *ngIf="show" class="card border-0 bg-transparent">
  <div class="card-body">
    <div class="card-head" >
      <span>
        <h1 class="card-title">{{menu.label}}</h1>
        <h4 class="card-subtitle mb-2 text-muted">Prix : {{menu.priceDF}} € </h4>
      </span>
      <span>
        <button class="btn btn-light" (click)="close(show)">❌</button>
      </span>
    </div>


    <table class="table" style="width: 800px;">
      <thead>
        <tr>
          <th >
            Plats:
          </th>
          <th>Action:</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let meal of meals">
          <td>
            <ul class="list-group list-group-flush">
              <li id="" class="list-group-item">
                <img [src]="meal.img" alt="">
                <label for="imgMeal">{{meal.label}}</label>
                <p class="card-subtitle text-muted">Ingredients:</p>
                <ul>
                  <li id="ingredients" *ngFor="let ingredient of meal.ingredients">{{ingredient.label}}, </li>
                </ul>
              </li>
            </ul>
          </td>
          <td *ngIf="stillTime" class="btnOrder">
            <p class="card-subtitle text-muted">{{meal.price}} €</p>
            <button class="btnAddCart" *ngIf="(user.id==0)" data-bs-toggle="modal" data-bs-target="#noAuthenticateModal" >Commander</button>
            <button class="btnAddCart" *ngIf="!(user.id==0)" data-bs-toggle="modal" data-bs-target="#orderModal" (click)="addToCart(meal.id)" >Commander</button>
          </td>
          <td *ngIf="!stillTime" class="btnOrder">
            <div id="AlertTimeOut"></div>
            <button type="button" class="btnAddCart" id="AlertBtn" (click)="timeOut()">Commander</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!--Modal if you're not authenticate-->
  <div class="modal " id="noAuthenticateModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false" role="dialog" aria-labelledby="noAuthenticateTitle" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="noAuthenticateTitle">Erreur pour la commande</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          Erreur de procédure.
          Vous devez être authentifié pour pouvoir passer votre commande.
        </div>
        <div class="modal-footer">
          <a routerLink="" class="btn btn-light" role="button">Se connecter</a>
          <a routerLink="" class="btn btn-light" role="button">S'inscrire</a>
          <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Cancel</button>
        </div>
      </div>
    </div>
  </div>
  <!--Modal if you're authenticate-->
  <div class="modal " id="orderModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false" role="dialog" aria-labelledby="orderModalTitle" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="orderModalTitle">Récapitulatif de la commande</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          Le plat vient d'être ajouté à votre panier avec succès.
          Vous pouvez continuer à alimenter celui-ci ou aller dans l'onglet correspondant
          afin de consulter les détails et valider votre commande.
        </div>
        <div class="modal-footer">
          <a routerLink="" class="btn btn-outline-warning"  role="button" data-bs-dismiss="modal" (click)="close(show)">Continuer les achats</a>
          <a routerLink="panier" class="btn btn-outline-warning" role="button" data-bs-dismiss="modal">Voir mon panier</a>
        </div>
      </div>
    </div>
  </div>
</div>
